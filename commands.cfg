[DEFAULT]
extends = "bycycle.core:commands.cfg"

build.dist_dir = "${build.dir}/dist"
build.static_dir = "${build.dir}/static"

aws.s3.bucket_name = "bycycle-org"
aws.s3.bucket_url = "http://${aws.s3.bucket_name}.s3.amazonaws.com"
aws.s3.bucket_uri = "s3://${aws.s3.bucket_name}"

deploy.root = "/sites/bycycle"
deploy.user = "bycycle"
deploy.dir = "${deploy.root}/${version}"
deploy.link = "${deploy.root}/current"
deploy.dist_dir = "${deploy.dir}/dist"
deploy.static_dir = "${aws.s3.bucket_uri}/${version}"

deploy.venv = "${deploy.dir}/venv"
deploy.bin = "${deploy.venv}/bin"

deploy.python.exe = "${deploy.bin}/python${python.version}"
deploy.pip.exe = "${deploy.bin}/pip${python.version}"
deploy.pip.find_links = "${deploy.dir}/dist"
deploy.pip.cache_dir = "${deploy.root}/pip/cache"
deploy.pip.wheel_dir = "${deploy.root}/pip/wheels"

defaults.provision.packages = [
        "certbot",
        "gcc",
        "libgeos-dev",
        "libproj-dev",
        "nginx-full",
        "postgresql-client",
        "python3.5",
        "python3.5-dev",
        "python3.5-venv",
        "uwsgi",
        "uwsgi-plugin-python3"
    ]

[production]
db.host = "bycycle.cwitqu7drify.us-west-2.rds.amazonaws.com"
db.port = 5432

remote.host = "bycycle.org"

defaults.runcommands.runners.commands.remote.run_as = "bycycle"
defaults.runcommands.runners.commands.remote.host = "${remote.host}"
